<!DOCTYPE html><html class=''>
<head>
    <meta charset='UTF-8'>
    <meta name="robots" content="noindex">
    <title>My experiment</title>

<link rel='stylesheet' type='text/css' href='css/jspsych.css'>
<link rel='stylesheet' type='text/css' href='css/default_style.css'>
<link rel='stylesheet' type='text/css' href='css/style.css'>
<link href="css/jspsych.css" rel="stylesheet" type="text/css"></link>

<style type="text/css">
span.green { color:#00ff00;font-weight:bold;font-family:Calibri;font-size:20;    // Declared as static }
span.red { color:#FF0000;font-weight:bold;font-family:Calibri;font-size:20;   // Declared as static }
.midden {left: center; top: 600px; position: fixed;}
</style>

</head>

<body>
<script src="plugins/jspsych.js"></script>
<script src="plugins/jspsych-instructions.js"></script>
<script src="plugins/jspsych-html-keyboard-response.js"></script>
<script src="plugins/jspsych-image-keyboard-response.js"></script>
<script src="plugins/jspsych-survey-likert.js"></script>
<script src="plugins/jspsych-fullscreen.js"></script>
<script src="plugins/jspsych-categorize-image.js"></script>
<script src="plugins/jspsych-categorize-html.js"></script>
<script src="plugins/jspsych-survey-multi-choice.js"></script>

<script src='plugins/jspsych-call-function.js'></script>
<script src='plugins/jspsych-survey-text.js'></script>

<script src='plugins/poldrack_plugins/jspsych-poldrack-text.js'></script>
<script src='plugins/poldrack_plugins/jspsych-poldrack-categorize.js'></script>
<script src='plugins/poldrack_plugins/jspsych-poldrack-instructions.js'></script>
<script src='plugins/poldrack_plugins/jspsych-attention-check.js'></script>
<script src='plugins/poldrack_plugins/jspsych-poldrack-single-stim.js'></script>
<script src='plugins/poldrack_plugins/jspsych-single-stim-button.js'></script>

<script>

    /* create timeline */
    var timeline = [];

    timeline.push({
        type: 'fullscreen',
        fullscreen_mode: true
      });

    /* create random participantID */
    var subject_id = jsPsych.randomization.randomID(5);
      jsPsych.data.addProperties({
      subject: subject_id,
      });

    var welcome = {
      type: 'instructions',
      pages: ['Welcome to the experiment. Click next to begin.',
        'You are going to participate in a study on brands and their logo\'s',
        'Before we start the experiment, we will ask you several questions about how you feel about the brands in this study'],
      show_clickable_nav: true,
      show_page_number: false
    }
    timeline.push(welcome);

    /* pre-questionnaire */
    // defining response scales that can be used.
    var scale_1 = ["Strongly Disagree","","Disagree","","Neutral","","Agree","","Strongly Agree"];

    var likert_scale_rabo = {
      type: 'survey-likert',
      questions: [{prompt: "I am familiar with the brand Rabobank", labels: scale_1},
      {prompt:  "If Rabobank were not available, it would make little difference to me if I had to choose another brand", labels: scale_1},
      {prompt: "I consider myself to be highly loyal to Rabobank", labels: scale_1},
      {prompt: "When another brand is cheaper, I will generally use it rather than Rabobank", labels: scale_1}],
      };

    var likert_scale_nike = {
      type: 'survey-likert',
      questions: [{prompt: "I am familiar with the brand Nike", labels: scale_1},
      {prompt:  "If Nike were not available, it would make little difference to me if I had to choose another brand", labels: scale_1},
      {prompt: "I consider myself to be highly loyal to Nike", labels: scale_1},
      {prompt: "When another brand is cheaper, I will generally buy it rather than Nike", labels: scale_1}],
      };

    var likert_scale_pepsi = {
      type: 'survey-likert',
      questions: [{prompt: "I am familiar with the brand Pepsi", labels: scale_1},
      {prompt:  "If Pepsi were not available, it would make little difference to me if I had to choose another brand", labels: scale_1},
      {prompt: "I consider myself to be highly loyal to Pepsi", labels: scale_1},
      {prompt: "When another brand is cheaper, I will generally buy it rather than Pepsi", labels: scale_1}],
      };

    var likert_scale_starbucks = {
      type: 'survey-likert',
      questions: [{prompt: "I am familiar with the brand Starbucks", labels: scale_1},
      {prompt: "If Starbucks were not available, it would make little difference to me if I had to choose another brand", labels: scale_1},
      {prompt: " I consider myself to be highly loyal to Starbucks", labels: scale_1},
      {prompt: " When another brand is cheaper, I will generally use it rather than Starbucks", labels: scale_1}],
      };
      // Insert more brands here

    var gender_options = ["Male","Female","Other"];
    var age_options = ["<18","18-25","26-35","35-50","50+"];
    var hand_options = ["Left","Right"];
    var occupation_options = ["Student","Employed","Other"]

    var demographic_block = {
      type: 'survey-multi-choice',
      questions: [{prompt: "Gender:", options: gender_options, required:true, horizontal: true,},
                  {prompt: "Age:", options: age_options, required: true, horizontal: true,},
                  {prompt: "Dominant hand:", options: hand_options, required: true, horizontal: true,},
                  {prompt: "Ocupation:", options: occupation_options, required: true, horizontal: true}],
    };

    var likert_procedure = {
      timeline: [likert_scale_rabo,likert_scale_pepsi,likert_scale_nike,likert_scale_starbucks,demographic_block],
      randomize_order: false,
      // repetitions: 3
    }

    // timeline.push(likert_scale);
    timeline.push(likert_procedure);

    /* define instructions trial */
    var instructions = {
      type: "html-keyboard-response",
      stimulus: "<p>In this experiment, you will first see a fixation cross " +
          "on the screen.</p><p>Then, shortly, a <strong>logo</strong> " +
          "is shown followed by a <strong> word </strong>.</p>" +
          "<p>Answer whether you feel the word matches the logo " +
          "as fast as you can.</p>" +
          "<p> Use your <strong> right hand </strong> to respond </p><br>" +
          "<p> Press the <strong> K-key for yes </strong> and the <strong> L-key for no </strong> </p><br><br>" +
          "<p> You will first have a practice round to get used to the task and its tempo </p>" +
          "<p> Press the <strong> P-key </strong> at any time to have a 30 second break </p>" +
          "<div style='width: 700px;'>"+
          "<p>Press any key to begin.</p>",
      post_trial_gap: 1000
    };
    timeline.push(instructions);

// input cut part here

    var factors = {
      logos: ['img/rabo1.png', 'img/rabo2.png','img/rabo3.png',
              'img/pepsi1.png', 'img/pepsi2.png','img/pepsi3.png',
              'img/nike1.png', 'img/nike2.png','img/nike3.png',
              'img/starbucks1.png', 'img/starbucks2.png','img/starbucks3.png'],
      //      logos: [{'img/rabo1.png', data: {test_part: 'test'}}, {'img/rabo2.png'data: {test_part: 'test'}},{'img/rabo3.png'data: {test_part: 'test'}}],
      words: ['<div style="font-size:60px;">expensive</div>', '<div style="font-size:60px;">fair</div>',
              '<div style="font-size:60px;">high quality</div>','<div style="font-size:60px;">desirable</div>',]
      // words: ['img/good.png','img/bad.png','img/beneficial.png','img/harmful.png',
      //        'img/desirable.png','img/undesirable.png','img/nice.png','img/awful.png']
    }

    var practice_factors = {
      practice_logos: ['img/unilever1.png', 'img/unilever2.png','img/unilever3.png'],
      practice_words: ['<div style="font-size:60px;">good</div>', '<div style="font-size:60px;">bad</div>']
    }

    var preloading = ['img/rabo1.png', 'img/rabo2.png','img/rabo3.png',
            'img/pepsi1.png', 'img/pepsi2.png','img/pepsi3.png',
            'img/nike1.png', 'img/nike2.png','img/nike3.png',
            'img/starbucks1.png', 'img/starbucks2.png','img/starbucks3.png'];

    var full_design = jsPsych.randomization.factorial(factors, 1);

    var practice_design = jsPsych.randomization.factorial(practice_factors, 1);

    var big_space = '\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0';

// show fixation cross
    var fixation = {
      type: 'html-keyboard-response',
      stimulus: '<div style="font-size:60px;">+</div>',
      choices: ['p'],
      trial_duration: 900,
      prompt: '<div style= width:100vw ><div style="position:absolute; top:66vh; left:33%; display: inline-block" ;=""><span class="green"> Yes (K) </span></div> <div style="position:absolute; top:66vh; right:33%; display: inline-block" ;=""><span class="red"> No (L)</span></div></div>',
      data: {test_part: 'fixation'},
      on_finish: function(data){
      if (data.key_press == 80) {
        jsPsych.pauseExperiment();
        setTimeout(jsPsych.resumeExperiment, 30000);
                                  }
                                }
    }

// Pause block
    var pause = {
      type: 'html-keyboard-response',
      stimulus: '<div style="font-size:60px;">This is a short break <br><br> Press any key to continue</div>',
      post_trial_gap: 1000
    }

// show company logo
    var test = {
      type: "image-keyboard-response",
      data: { screen_type: 'logo'},
      stimulus: jsPsych.timelineVariable('logos'),
      choices: ['p'],
      prompt: '<div style= width:100vw ><div style="position:absolute; top:66vh; left:33%; display: inline-block" ;=""><span class="green"> Yes (K) </span></div> <div style="position:absolute; top:66vh; right:33%; display: inline-block" ;=""><span class="red"> No (L)</span></div></div>',
      trial_duration: 750,
      data: {test_part: 'logo'},
      on_finish: function(data){
      if (data.key_press == 80) {
        jsPsych.pauseExperiment();
        setTimeout(jsPsych.resumeExperiment, 30000);
                                  }
                                  prompt: 'TEST';
                                }
    }
// show practice logo
    var practice_test = {
      type: "image-keyboard-response",
      data: { screen_type: 'practice_logo'},
      stimulus: jsPsych.timelineVariable('practice_logos'),
      choices: ['p'],
      prompt: '<div style= width:100vw ><div style="position:absolute; top:66vh; left:33%; display: inline-block" ;=""><span class="green"> Yes (K) </span></div> <div style="position:absolute; top:66vh; right:33%; display: inline-block" ;=""><span class="red"> No (L)</span></div></div>',
      trial_duration: 750,
      data: {test_part: 'practice logo'},
      on_finish: function(data){
      if (data.key_press == 80) {
        jsPsych.pauseExperiment();
        setTimeout(jsPsych.resumeExperiment, 30000);
        prompt: 'TEST';
                                  }
                                }
    }
// show target word
    var word = {
      type: "categorize-html",
      data: { screen_type: 'targetWord'},
      stimulus: jsPsych.timelineVariable('words'),
      choices: ['k','l','p'], //a-s for left-handed, k-l for right-handed
      data: jsPsych.timelineVariable('data'),
      //trial_duration: 1500,
      show_stim_with_feedback: false,
      incorrect_text: "<p class='prompt'> </p>",
      prompt: '<div style= width:100vw ><div style="position:absolute; top:66vh; left:33%; display: inline-block" ;=""><span class="green"> Yes (K) </span></div> <div style="position:absolute; top:66vh; right:33%; display: inline-block" ;=""><span class="red"> No (L)</span></div></div>',
      feedback_duration: 1400, // duration of white before next trial starts
      timeout_message: '<div class = centerbox><div class = center-text>Too Slow!</div></div>',
      data: {test_part: 'word'},
      on_finish: function(data){
      if (data.key_press == 80) {
        jsPsych.pauseExperiment();
        setTimeout(jsPsych.resumeExperiment, 30000);
                                  }
                                }
    }
// show practice target word
    var practice_word = {
      type: "categorize-html",
      data: { screen_type: 'practice_targetWord'},
      stimulus: jsPsych.timelineVariable('practice_words'),
      choices: ['k','l','p'], //a-s for left-handed, k-l for right-handed
      data: jsPsych.timelineVariable('data'),
      //trial_duration: 1500,
      show_stim_with_feedback: false,
      incorrect_text: "<p class='prompt'> </p>",
      // prompt: '<p class="midden"><span class="green">Yes (K)' + big_space +  '<span class="red">No (L)</span> </p></p>',
      prompt: '<div style= width:100vw ><div style="position:absolute; top:66vh; left:33%; display: inline-block" ;=""><span class="green"> Yes (K) </span></div> <div style="position:absolute; top:66vh; right:33%; display: inline-block" ;=""><span class="red"> No (L)</span></div></div>',
      feedback_duration: 1400, // duration of white before next trial starts
      timeout_message: '<div class = centerbox><div class = center-text>Too Slow!</div></div>',
      data: {test_part: 'practice word'},
      on_finish: function(data){
      if (data.key_press == 80) {
        jsPsych.pauseExperiment();
        setTimeout(jsPsych.resumeExperiment, 30000);
                                  }
                                }
                              }
/* This method is to be used when the target word is presented as an image
    var word = {
      // type: 'image-keyboard-response',
      type: "categorize-image",
      data: { screen_type: 'targetWord'},
      stimulus: jsPsych.timelineVariable('words'),
      choices: ['f','j'],
      data: jsPsych.timelineVariable('data'),
      trial_duration: 1500,
      //timeout_message: "Too Slow!"
      show_stim_with_feedback: false,
      incorrect_text: "<p class='prompt'> </p>",
      prompt: "<br><br><br><br><br><br><br><br><br><pre>Yes (F)                                        (J) No</pre>",
      feedback_duration: 1400, // duration of white before next trial starts
      timeout_message: '<div class = centerbox><div class = center-text>Respond Faster!</div></div>',
    }
*/
    var practice_procedure = {
      timeline: [fixation, practice_test, practice_word],
      timeline_variables: practice_design,
      randomize_order: false,
      repetitions: 1
    }

    var test_procedure = {
      timeline: [fixation, test, word],
      timeline_variables: full_design,
      randomize_order: true,
      repetitions: 1
    }

    timeline.push(practice_procedure);

    var practice_end = {
      type: "html-keyboard-response",
      stimulus: "<p>You finished the practice round. The actual experiment will now begin </p> " +
          "<p> As a reminder: use the <strong> K-key for yes </strong> and the <strong> L-key for no </strong> </p><br><br>" +
          "<p> Press the <strong> P-key </strong> at any time to have a 30 second break </p>" +
          "<div style='width: 700px;'>"+
          /*"<div style='float: left;'><img src='img/blue.png'></img>" +
          "<p class='small'><strong>Press the F key</strong></p></div>" +
          "<div class='float: right;'><img src='img/orange.png'></img>" +
          "<p class='small'><strong>Press the J key</strong></p></div>" +
          "</div>"+*/
          "<p>Press any key to begin.</p>",
      post_trial_gap: 1000
    };

    timeline.push(practice_end);

    timeline.push(test_procedure);
    timeline.push(pause);
    timeline.push(test_procedure);
    timeline.push(pause);
    timeline.push(test_procedure);

    /* define debrief */
    var debrief_block = {
      type: "html-keyboard-response",
      stimulus: function() {

    var trials = jsPsych.data.get().filter({test_part: 'test'});
    var rt = Math.round(trials.select('rt').mean());
    var trialNums = trials.count();
          }
        };

    timeline.push(debrief_block);

    timeline.push({
      type: 'fullscreen',
      fullscreen_mode: false
    });

    /* start the experiment */
    jsPsych.init({
      timeline: timeline,
      fullscreen: true,
      show_preload_progress_bar: true,
      on_finish: function() {
      jsPsych.data.displayData(); // displaying in browser in trial by trial form
      //jsPsych.data.displayData('csv'); // displaying in browser in csv form

      // select all trials
      var all_data = jsPsych.data.get();
      // get csv representation of data and log to console
      console.log(all_data.csv());
      jsPsych.data.get().localSave('csv','mydata.csv'); // Save localy as csv
      // When collecting online, visit: https://www.jspsych.org/overview/data/ for instructions on saving
      jsPsych.data.localSave('brand-experiment-results.csv', 'csv');
    }
    });

  </script>
  </body>
  </html>
